datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

generator client {
  provider = "prisma-client-js"
}

model Influencer {
  id                       Int     @id @default(autoincrement())
  channelName              String  @unique
  channelYoutubeId         String
  category                 String?
  avgViews                 Int
  callRequired             Boolean
  engagementRate           Float
  topCountriesProportion   Float
  richCountriesFollowers   Int
  maleFollowers            Float
  followerGrowthRate       Float
  englishSpeakingFollowers Int
  trackingUrl              String  @unique
  deals                    Deal[]
  videos                   Video[]
  clicks                   Click[]
}

model Deal {
  id                Int        @id @default(autoincrement())
  influencer        Influencer @relation(fields: [influencerId], references: [id])
  influencerId      Int
  contractedBy      String
  agencyName        String?
  pricingType       String
  fixedCost         Float?
  cpm               Float?
  priceCeiling      Float?
  viewGuarantee     Int?
  viewGuaranteeDays Int?
  postDate          DateTime
  videos            Video[]
}

model Video {
  id           Int         @id @default(autoincrement())
  youtubeId    String      @unique
  title        String
  views        Int?
  likes        Int?
  comments     Int?
  influencer   Influencer  @relation(fields: [influencerId], references: [id])
  influencerId Int
  deal         Deal?       @relation(fields: [dealId], references: [id])
  dealId       Int?
  postDate     DateTime
}

model Click {
  id           Int        @id @default(autoincrement())
  influencer   Influencer @relation(fields: [influencerId], references: [id])
  influencerId Int
  timestamp    DateTime   @default(now())
  ipAddress    String?
  userAgent    String?
}