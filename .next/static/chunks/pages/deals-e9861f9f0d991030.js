(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[901],{8605:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/deals",function(){return a(2724)}])},7245:function(e,t,a){"use strict";a.d(t,{z:function(){return c}});var i=a(5893),n=a(7294),r=a(8426),s=a(5139),l=a(108);let d=(0,s.j)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:a,variant:n,size:s,asChild:c=!1,...o}=e,u=c?r.g7:"button";return(0,i.jsx)(u,{className:(0,l.cn)(d({variant:n,size:s,className:a})),ref:t,...o})});c.displayName="Button"},4680:function(e,t,a){"use strict";a.d(t,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return s},aY:function(){return o},ll:function(){return d}});var i=a(5893),n=a(7294),r=a(108);let s=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...n})});s.displayName="Card";let l=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",a),...n})});l.displayName="CardHeader";let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("h3",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",a),...n})});d.displayName="CardTitle";let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",a),...n})});c.displayName="CardDescription";let o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",a),...n})});o.displayName="CardContent",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",a),...n})}).displayName="CardFooter"},1774:function(e,t,a){"use strict";a.d(t,{I:function(){return s}});var i=a(5893),n=a(7294),r=a(108);let s=n.forwardRef((e,t)=>{let{className:a,type:n,...s}=e;return(0,i.jsx)("input",{type:n,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...s})});s.displayName="Input"},4193:function(e,t,a){"use strict";a.d(t,{_:function(){return l}});var i=a(5893),n=a(7294),r=a(9102),s=a(108);let l=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)(r.f,{ref:t,className:(0,s.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...n})});l.displayName=r.f.displayName},8659:function(e,t,a){"use strict";a.d(t,{Bw:function(){return p},Ph:function(){return c},Ql:function(){return m},i4:function(){return u},ki:function(){return o}});var i=a(5893),n=a(7294),r=a(9560),s=a(2171),l=a(8865),d=a(108);let c=r.fC;r.ZA;let o=r.B4,u=n.forwardRef((e,t)=>{let{className:a,children:n,...l}=e;return(0,i.jsxs)(r.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...l,children:[n,(0,i.jsx)(r.JO,{asChild:!0,children:(0,i.jsx)(s.Z,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=r.xz.displayName;let p=n.forwardRef((e,t)=>{let{className:a,children:n,position:s="popper",...l}=e;return(0,i.jsx)(r.h_,{children:(0,i.jsx)(r.VY,{ref:t,className:(0,d.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md animate-in fade-in-80","popper"===s&&"translate-y-1",a),position:s,...l,children:(0,i.jsx)(r.l_,{className:(0,d.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n})})})});p.displayName=r.VY.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)(r.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...n})}).displayName=r.__.displayName;let m=n.forwardRef((e,t)=>{let{className:a,children:n,...s}=e;return(0,i.jsxs)(r.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...s,children:[(0,i.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,i.jsx)(r.wU,{children:(0,i.jsx)(l.Z,{className:"h-4 w-4"})})}),(0,i.jsx)(r.eT,{children:n})]})});m.displayName=r.ck.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)(r.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...n})}).displayName=r.Z0.displayName},2724:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var i=a(5893),n=a(7294),r=a(4680),s=a(1774),l=a(4193),d=a(7245),c=a(8659),o=a(321),u=a(9284),p=a(3114);let m=["none","1 month","2 months","3 months"],h=["2-3 minutes","Dedicated Video","60sec","3-minute","90sec","2-minute postroll","2-minute","60-90 sec","Make Good","3 - 4 minutes","30sec","90-120 sec","IG Reel"];function f(){let[e,t]=(0,n.useState)("add"),[a,f]=(0,n.useState)([]),[y,x]=(0,n.useState)([]),[g,v]=(0,n.useState)([]),[j,b]=(0,n.useState)(null),[N,w]=(0,n.useState)({name:"",influencerId:0,contractedBy:"DIRECT",pricingType:"",status:"active",numberOfVideos:1,uploadMonths:[""],usage:"none",deliverable:""});(0,n.useEffect)(()=>{C(),E(),_()},[]);let C=async()=>{try{let e=await fetch("/api/deals"),t=await e.json();f(t)}catch(e){console.error("Error fetching deals:",e),(0,o.Am)({title:"Error",description:"Failed to fetch deals. Please try again.",variant:"destructive"})}},E=async()=>{try{let e=await fetch("/api/influencers"),t=await e.json();x(t)}catch(e){console.error("Error fetching influencers:",e),(0,o.Am)({title:"Error",description:"Failed to fetch influencers. Please try again.",variant:"destructive"})}},_=async()=>{try{let e=await fetch("/api/agencies"),t=await e.json();v(t)}catch(e){console.error("Error fetching agencies:",e),(0,o.Am)({title:"Error",description:"Failed to fetch agencies. Please try again.",variant:"destructive"})}},I=e=>{let{name:t,value:a}=e.target;w(e=>({...e,[t]:["fixedCost","cpm","priceCeiling","viewGuarantee","viewGuaranteeDays","numberOfVideos"].includes(t)?Number(a):a})),("influencerId"===t||"numberOfVideos"===t||"uploadMonths"===t)&&k()},P=(e,t)=>{let a=[...N.uploadMonths];a[e]=t,w(e=>({...e,uploadMonths:a})),k()},k=()=>{let e=y.find(e=>e.id===Number(N.influencerId));if(e&&N.uploadMonths[0]){let t=new Date(N.uploadMonths[0]).toLocaleString("default",{month:"long",year:"numeric"}),a="".concat(e.channelName,": ").concat(N.numberOfVideos," videos, Starting ").concat(t);w(e=>({...e,name:a}))}},D=async t=>{t.preventDefault();try{let t="add"===e?"/api/deals":"/api/deals/".concat(null==j?void 0:j.id),a="add"===e?"POST":"PUT";if((await fetch(t,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(N)})).ok)(0,o.Am)({title:"Success",description:"Deal ".concat("add"===e?"added":"updated"," successfully.")}),C(),w({name:"",influencerId:0,contractedBy:"DIRECT",pricingType:"",status:"active",numberOfVideos:1,uploadMonths:[""],usage:"none",deliverable:""}),b(null);else throw Error("Failed to ".concat(e," deal"))}catch(t){console.error("Error ".concat(e,"ing deal:"),t),(0,o.Am)({title:"Error",description:"Failed to ".concat(e," deal. Please try again."),variant:"destructive"})}};return(0,i.jsxs)(u.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"container mx-auto py-8",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Manage Deals"}),(0,i.jsxs)("div",{className:"mb-8 flex space-x-4",children:[(0,i.jsx)(d.z,{onClick:()=>t("add"),variant:"add"===e?"default":"outline",className:"w-40 transition-all duration-300 ease-in-out",children:"Add Deal"}),(0,i.jsx)(d.z,{onClick:()=>t("update"),variant:"update"===e?"default":"outline",className:"w-40 transition-all duration-300 ease-in-out",children:"Update Deal"})]}),(0,i.jsx)(p.M,{mode:"wait",children:(0,i.jsx)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:(0,i.jsxs)(r.Zb,{className:"shadow-lg",children:[(0,i.jsx)(r.Ol,{children:(0,i.jsx)(r.ll,{className:"text-2xl",children:"add"===e?"Add New Deal":"Update Deal"})}),(0,i.jsxs)(r.aY,{children:["update"===e&&(0,i.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"mb-6",children:[(0,i.jsx)(l._,{htmlFor:"selectDeal",className:"text-lg mb-2 block",children:"Select Deal to Update"}),(0,i.jsxs)(c.Ph,{onValueChange:e=>{let t=a.find(t=>t.id===parseInt(e));t&&(b(t),w(t))},children:[(0,i.jsx)(c.i4,{id:"selectDeal",className:"w-full",children:(0,i.jsx)(c.ki,{placeholder:"Select a deal"})}),(0,i.jsx)(c.Bw,{children:a.map(e=>{var t;return(0,i.jsx)(c.Ql,{value:(null===(t=e.id)||void 0===t?void 0:t.toString())||"",children:e.name},e.id)})})]})]}),(0,i.jsxs)("form",{onSubmit:D,className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-2",children:[(0,i.jsx)(l._,{htmlFor:"influencerId",children:"Influencer"}),(0,i.jsxs)(c.Ph,{name:"influencerId",onValueChange:e=>I({target:{name:"influencerId",value:e}}),children:[(0,i.jsx)(c.i4,{id:"influencerId",children:(0,i.jsx)(c.ki,{placeholder:"Select an influencer"})}),(0,i.jsx)(c.Bw,{children:y.map(e=>(0,i.jsx)(c.Ql,{value:e.id.toString(),children:e.channelName},e.id))})]})]}),(0,i.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.05},className:"space-y-2",children:[(0,i.jsx)(l._,{htmlFor:"contractedBy",children:"Contracted By"}),(0,i.jsxs)(c.Ph,{name:"contractedBy",onValueChange:e=>I({target:{name:"contractedBy",value:e}}),children:[(0,i.jsx)(c.i4,{id:"contractedBy",children:(0,i.jsx)(c.ki,{placeholder:"Select contracted by"})}),(0,i.jsxs)(c.Bw,{children:[(0,i.jsx)(c.Ql,{value:"DIRECT",children:"Direct"}),(0,i.jsx)(c.Ql,{value:"AGENCY",children:"Agency"})]})]})]}),"AGENCY"===N.contractedBy&&(0,i.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"space-y-2",children:[(0,i.jsx)(l._,{htmlFor:"agencyId",children:"Agency"}),(0,i.jsxs)(c.Ph,{name:"agencyId",onValueChange:e=>I({target:{name:"agencyId",value:e}}),children:[(0,i.jsx)(c.i4,{id:"agencyId",children:(0,i.jsx)(c.ki,{placeholder:"Select an agency"})}),(0,i.jsx)(c.Bw,{children:g.map(e=>(0,i.jsx)(c.Ql,{value:e.id.toString(),children:e.name},e.id))})]})]}),(0,i.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.15},className:"space-y-2",children:[(0,i.jsx)(l._,{htmlFor:"pricingType",children:"Pricing Type"}),(0,i.jsxs)(c.Ph,{name:"pricingType",onValueChange:e=>I({target:{name:"pricingType",value:e}}),children:[(0,i.jsx)(c.i4,{id:"pricingType",children:(0,i.jsx)(c.ki,{placeholder:"Select pricing type"})}),(0,i.jsxs)(c.Bw,{children:[(0,i.jsx)(c.Ql,{value:"FIXED",children:"Fixed"}),(0,i.jsx)(c.Ql,{value:"CPM",children:"CPM"})]})]})]}),"FIXED"===N.pricingType&&(0,i.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},className:"space-y-2",children:[(0,i.jsx)(l._,{htmlFor:"fixedCost",children:"Fixed Cost (per video)"}),(0,i.jsx)(s.I,{id:"fixedCost",name:"fixedCost",type:"number",value:N.fixedCost||"",onChange:I,required:!0})]}),"CPM"===N.pricingType&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},className:"space-y-2",children:[(0,i.jsx)(l._,{htmlFor:"cpm",children:"CPM"}),(0,i.jsx)(s.I,{id:"cpm",name:"cpm",type:"number",value:N.cpm||"",onChange:I,required:!0})]}),(0,i.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.25},className:"space-y-2",children:[(0,i.jsx)(l._,{htmlFor:"priceCeiling",children:"Price Ceiling"}),(0,i.jsx)(s.I,{id:"priceCeiling",name:"priceCeiling",type:"number",value:N.priceCeiling||"",onChange:I})]})]}),(0,i.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},className:"space-y-2",children:[(0,i.jsx)(l._,{htmlFor:"viewGuarantee",children:"View Guarantee"}),(0,i.jsx)(s.I,{id:"viewGuarantee",name:"viewGuarantee",type:"number",value:N.viewGuarantee||"",onChange:I})]}),(0,i.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.35},className:"space-y-2",children:[(0,i.jsx)(l._,{htmlFor:"viewGuaranteeDays",children:"View Guarantee Days"}),(0,i.jsx)(s.I,{id:"viewGuaranteeDays",name:"viewGuaranteeDays",type:"number",value:N.viewGuaranteeDays||"",onChange:I})]}),(0,i.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.4},className:"space-y-2",children:[(0,i.jsx)(l._,{htmlFor:"status",children:"Status"}),(0,i.jsxs)(c.Ph,{name:"status",onValueChange:e=>I({target:{name:"status",value:e}}),children:[(0,i.jsx)(c.i4,{id:"status",children:(0,i.jsx)(c.ki,{placeholder:"Select status"})}),(0,i.jsxs)(c.Bw,{children:[(0,i.jsx)(c.Ql,{value:"active",children:"Active"}),(0,i.jsx)(c.Ql,{value:"completed",children:"Completed"}),(0,i.jsx)(c.Ql,{value:"cancelled",children:"Cancelled"})]})]})]}),(0,i.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.45},className:"space-y-2 col-span-2",children:[(0,i.jsx)(l._,{children:"Number of Videos and Upload Months"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsx)("div",{className:"space-y-2",children:(0,i.jsx)(s.I,{id:"numberOfVideos",name:"numberOfVideos",type:"number",value:N.numberOfVideos,onChange:e=>{let t=Number(e.target.value);w(e=>({...e,numberOfVideos:t,uploadMonths:Array(t).fill("").map((t,a)=>e.uploadMonths[a]||"")})),k()},required:!0,min:1,placeholder:"Number of Videos"})}),(0,i.jsx)("div",{className:"space-y-2",children:N.uploadMonths.map((e,t)=>(0,i.jsx)(s.I,{type:"month",value:e,onChange:e=>P(t,e.target.value),required:!0,placeholder:"Upload Month ".concat(t+1),className:"mb-2"},t))})]})]}),(0,i.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.5},className:"space-y-2",children:[(0,i.jsx)(l._,{htmlFor:"usage",children:"Usage"}),(0,i.jsxs)(c.Ph,{name:"usage",onValueChange:e=>{w(t=>({...t,usage:e}))},value:N.usage,children:[(0,i.jsx)(c.i4,{id:"usage",children:(0,i.jsx)(c.ki,{placeholder:"Select usage"})}),(0,i.jsx)(c.Bw,{children:m.map(e=>(0,i.jsx)(c.Ql,{value:e,children:e},e))})]})]}),(0,i.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.55},className:"space-y-2",children:[(0,i.jsx)(l._,{htmlFor:"deliverable",children:"Deliverable"}),(0,i.jsxs)(c.Ph,{name:"deliverable",onValueChange:e=>{w(t=>({...t,deliverable:e}))},value:N.deliverable,children:[(0,i.jsx)(c.i4,{id:"deliverable",children:(0,i.jsx)(c.ki,{placeholder:"Select deliverable"})}),(0,i.jsx)(c.Bw,{children:h.map(e=>(0,i.jsx)(c.Ql,{value:e,children:e},e))})]})]})]}),(0,i.jsx)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.6},children:(0,i.jsx)(d.z,{type:"submit",className:"w-full",children:"add"===e?"Add Deal":"Update Deal"})})]})]})]})},e)})]})}},3114:function(e,t,a){"use strict";a.d(t,{M:function(){return x}});var i=a(5893),n=a(7294),r=a(240),s=a(6681),l=a(6014);class d extends n.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function c({children:e,isPresent:t}){let a=(0,n.useId)(),r=(0,n.useRef)(null),s=(0,n.useRef)({width:0,height:0,top:0,left:0}),{nonce:c}=(0,n.useContext)(l._);return(0,n.useInsertionEffect)(()=>{let{width:e,height:i,top:n,left:l}=s.current;if(t||!r.current||!e||!i)return;r.current.dataset.motionPopId=a;let d=document.createElement("style");return c&&(d.nonce=c),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${i}px !important;
            top: ${n}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[t]),(0,i.jsx)(d,{isPresent:t,childRef:r,sizeRef:s,children:n.cloneElement(e,{ref:r})})}let o=({children:e,initial:t,isPresent:a,onExitComplete:l,custom:d,presenceAffectsLayout:o,mode:p})=>{let m=(0,s.h)(u),h=(0,n.useId)(),f=(0,n.useCallback)(e=>{for(let t of(m.set(e,!0),m.values()))if(!t)return;l&&l()},[m,l]),y=(0,n.useMemo)(()=>({id:h,initial:t,isPresent:a,custom:d,onExitComplete:f,register:e=>(m.set(e,!1),()=>m.delete(e))}),o?[Math.random(),f]:[a,f]);return(0,n.useMemo)(()=>{m.forEach((e,t)=>m.set(t,!1))},[a]),n.useEffect(()=>{a||m.size||!l||l()},[a]),"popLayout"===p&&(e=(0,i.jsx)(c,{isPresent:a,children:e})),(0,i.jsx)(r.O.Provider,{value:y,children:e})};function u(){return new Map}var p=a(5364),m=a(5487);let h=e=>e.key||"";function f(e){let t=[];return n.Children.forEach(e,e=>{(0,n.isValidElement)(e)&&t.push(e)}),t}var y=a(8868);let x=({children:e,exitBeforeEnter:t,custom:a,initial:r=!0,onExitComplete:l,presenceAffectsLayout:d=!0,mode:c="sync"})=>{(0,m.k)(!t,"Replace exitBeforeEnter with mode='wait'");let u=(0,n.useMemo)(()=>f(e),[e]),x=u.map(h),g=(0,n.useRef)(!0),v=(0,n.useRef)(u),j=(0,s.h)(()=>new Map),[b,N]=(0,n.useState)(u),[w,C]=(0,n.useState)(u);(0,y.L)(()=>{g.current=!1,v.current=u;for(let e=0;e<w.length;e++){let t=h(w[e]);x.includes(t)?j.delete(t):!0!==j.get(t)&&j.set(t,!1)}},[w,x.length,x.join("-")]);let E=[];if(u!==b){let e=[...u];for(let t=0;t<w.length;t++){let a=w[t],i=h(a);x.includes(i)||(e.splice(t,0,a),E.push(a))}"wait"===c&&E.length&&(e=E),C(f(e)),N(u);return}let{forceRender:_}=(0,n.useContext)(p.p);return(0,i.jsx)(i.Fragment,{children:w.map(e=>{let t=h(e),n=u===w||x.includes(t);return(0,i.jsx)(o,{isPresent:n,initial:(!g.current||!!r)&&void 0,custom:n?void 0:a,presenceAffectsLayout:d,mode:c,onExitComplete:n?void 0:()=>{if(!j.has(t))return;j.set(t,!0);let e=!0;j.forEach(t=>{t||(e=!1)}),e&&(null==_||_(),C(v.current),l&&l())},children:e},t)})})}}},function(e){e.O(0,[408,888,774,179],function(){return e(e.s=8605)}),_N_E=e.O()}]);