(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[901],{78605:function(e,a,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/deals",function(){return i(22724)}])},27245:function(e,a,i){"use strict";i.d(a,{z:function(){return c}});var n=i(85893),t=i(67294),r=i(88426),l=i(45139),s=i(40108);let d=(0,l.j)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),c=t.forwardRef((e,a)=>{let{className:i,variant:t,size:l,asChild:c=!1,...o}=e,u=c?r.g7:"button";return(0,n.jsx)(u,{className:(0,s.cn)(d({variant:t,size:l,className:i})),ref:a,...o})});c.displayName="Button"},34680:function(e,a,i){"use strict";i.d(a,{Ol:function(){return s},SZ:function(){return c},Zb:function(){return l},aY:function(){return o},ll:function(){return d}});var n=i(85893),t=i(67294),r=i(40108);let l=t.forwardRef((e,a)=>{let{className:i,...t}=e;return(0,n.jsx)("div",{ref:a,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",i),...t})});l.displayName="Card";let s=t.forwardRef((e,a)=>{let{className:i,...t}=e;return(0,n.jsx)("div",{ref:a,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",i),...t})});s.displayName="CardHeader";let d=t.forwardRef((e,a)=>{let{className:i,...t}=e;return(0,n.jsx)("h3",{ref:a,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",i),...t})});d.displayName="CardTitle";let c=t.forwardRef((e,a)=>{let{className:i,...t}=e;return(0,n.jsx)("p",{ref:a,className:(0,r.cn)("text-sm text-muted-foreground",i),...t})});c.displayName="CardDescription";let o=t.forwardRef((e,a)=>{let{className:i,...t}=e;return(0,n.jsx)("div",{ref:a,className:(0,r.cn)("p-6 pt-0",i),...t})});o.displayName="CardContent",t.forwardRef((e,a)=>{let{className:i,...t}=e;return(0,n.jsx)("div",{ref:a,className:(0,r.cn)("flex items-center p-6 pt-0",i),...t})}).displayName="CardFooter"},21774:function(e,a,i){"use strict";i.d(a,{I:function(){return l}});var n=i(85893),t=i(67294),r=i(40108);let l=t.forwardRef((e,a)=>{let{className:i,type:t,...l}=e;return(0,n.jsx)("input",{type:t,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",i),ref:a,...l})});l.displayName="Input"},94193:function(e,a,i){"use strict";i.d(a,{_:function(){return s}});var n=i(85893),t=i(67294),r=i(49102),l=i(40108);let s=t.forwardRef((e,a)=>{let{className:i,...t}=e;return(0,n.jsx)(r.f,{ref:a,className:(0,l.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",i),...t})});s.displayName=r.f.displayName},88659:function(e,a,i){"use strict";i.d(a,{Bw:function(){return p},Ph:function(){return c},Ql:function(){return m},i4:function(){return u},ki:function(){return o}});var n=i(85893),t=i(67294),r=i(19761),l=i(42171),s=i(78865),d=i(40108);let c=r.fC;r.ZA;let o=r.B4,u=t.forwardRef((e,a)=>{let{className:i,children:t,...s}=e;return(0,n.jsxs)(r.xz,{ref:a,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",i),...s,children:[t,(0,n.jsx)(r.JO,{asChild:!0,children:(0,n.jsx)(l.Z,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=r.xz.displayName;let p=t.forwardRef((e,a)=>{let{className:i,children:t,position:l="popper",...s}=e;return(0,n.jsx)(r.h_,{children:(0,n.jsx)(r.VY,{ref:a,className:(0,d.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md animate-in fade-in-80","popper"===l&&"translate-y-1",i),position:l,...s,children:(0,n.jsx)(r.l_,{className:(0,d.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t})})})});p.displayName=r.VY.displayName,t.forwardRef((e,a)=>{let{className:i,...t}=e;return(0,n.jsx)(r.__,{ref:a,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",i),...t})}).displayName=r.__.displayName;let m=t.forwardRef((e,a)=>{let{className:i,children:t,...l}=e;return(0,n.jsxs)(r.ck,{ref:a,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",i),...l,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(r.wU,{children:(0,n.jsx)(s.Z,{className:"h-4 w-4"})})}),(0,n.jsx)(r.eT,{children:t})]})});m.displayName=r.ck.displayName,t.forwardRef((e,a)=>{let{className:i,...t}=e;return(0,n.jsx)(r.Z0,{ref:a,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",i),...t})}).displayName=r.Z0.displayName},22724:function(e,a,i){"use strict";i.r(a),i.d(a,{default:function(){return y}});var n=i(85893),t=i(67294),r=i(34680),l=i(21774),s=i(94193),d=i(27245),c=i(88659),o=i(30321),u=i(79284),p=i(13114);let m=["none","1 month","2 months","3 months"],h=["2-3 minutes","Dedicated Video","60sec","3-minute","90sec","2-minute postroll","2-minute","60-90 sec","Make Good","3 - 4 minutes","30sec","90-120 sec","IG Reel"];function y(){let[e,a]=(0,t.useState)("add"),[i,y]=(0,t.useState)([]),[f,x]=(0,t.useState)([]),[g,j]=(0,t.useState)([]),[v,b]=(0,t.useState)(null),[N,w]=(0,t.useState)({name:"",influencerId:0,contractedBy:"DIRECT",pricingType:"",status:"active",numberOfVideos:1,uploadMonths:[""],usage:"none",deliverable:""});(0,t.useEffect)(()=>{C(),E(),_()},[]);let C=async()=>{try{let e=await fetch("/api/deals"),a=await e.json();y(a)}catch(e){console.error("Error fetching deals:",e),(0,o.Am)({title:"Error",description:"Failed to fetch deals. Please try again.",variant:"destructive"})}},E=async()=>{try{let e=await fetch("/api/influencers"),a=await e.json();x(a)}catch(e){console.error("Error fetching influencers:",e),(0,o.Am)({title:"Error",description:"Failed to fetch influencers. Please try again.",variant:"destructive"})}},_=async()=>{try{let e=await fetch("/api/agencies"),a=await e.json();j(a)}catch(e){console.error("Error fetching agencies:",e),(0,o.Am)({title:"Error",description:"Failed to fetch agencies. Please try again.",variant:"destructive"})}},I=e=>{let{name:a,value:i}=e.target;w(e=>({...e,[a]:["fixedCost","cpm","priceCeiling","viewGuarantee","viewGuaranteeDays","numberOfVideos"].includes(a)?Number(i):i})),("influencerId"===a||"numberOfVideos"===a||"uploadMonths"===a)&&k()},D=(e,a)=>{let i=[...N.uploadMonths];i[e]=a,w(e=>({...e,uploadMonths:i})),k()},k=()=>{let e=f.find(e=>e.id===Number(N.influencerId));if(e&&N.uploadMonths[0]){let a=new Date(N.uploadMonths[0]).toLocaleString("default",{month:"long",year:"numeric"}),i="".concat(e.channelName,": ").concat(N.numberOfVideos," videos, Starting ").concat(a);w(e=>({...e,name:i}))}},S=async a=>{a.preventDefault();try{let a="add"===e?"/api/deals":"/api/deals/".concat(null==v?void 0:v.id),i="add"===e?"POST":"PUT";if((await fetch(a,{method:i,headers:{"Content-Type":"application/json"},body:JSON.stringify(N)})).ok)(0,o.Am)({title:"Success",description:"Deal ".concat("add"===e?"added":"updated"," successfully.")}),C(),w({name:"",influencerId:0,contractedBy:"DIRECT",pricingType:"",status:"active",numberOfVideos:1,uploadMonths:[""],usage:"none",deliverable:""}),b(null);else throw Error("Failed to ".concat(e," deal"))}catch(a){console.error("Error ".concat(e,"ing deal:"),a),(0,o.Am)({title:"Error",description:"Failed to ".concat(e," deal. Please try again."),variant:"destructive"})}};return(0,n.jsxs)(u.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"container mx-auto py-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Manage Deals"}),(0,n.jsxs)("div",{className:"mb-8 flex space-x-4",children:[(0,n.jsx)(d.z,{onClick:()=>a("add"),variant:"add"===e?"default":"outline",className:"w-40 transition-all duration-300 ease-in-out",children:"Add Deal"}),(0,n.jsx)(d.z,{onClick:()=>a("update"),variant:"update"===e?"default":"outline",className:"w-40 transition-all duration-300 ease-in-out",children:"Update Deal"})]}),(0,n.jsx)(p.M,{mode:"wait",children:(0,n.jsx)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:(0,n.jsxs)(r.Zb,{className:"shadow-lg",children:[(0,n.jsx)(r.Ol,{children:(0,n.jsx)(r.ll,{className:"text-2xl",children:"add"===e?"Add New Deal":"Update Deal"})}),(0,n.jsxs)(r.aY,{children:["update"===e&&(0,n.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"mb-6",children:[(0,n.jsx)(s._,{htmlFor:"selectDeal",className:"text-lg mb-2 block",children:"Select Deal to Update"}),(0,n.jsxs)(c.Ph,{onValueChange:e=>{let a=i.find(a=>a.id===parseInt(e));a&&(b(a),w(a))},children:[(0,n.jsx)(c.i4,{id:"selectDeal",className:"w-full",children:(0,n.jsx)(c.ki,{placeholder:"Select a deal"})}),(0,n.jsx)(c.Bw,{children:i.map(e=>{var a;return(0,n.jsx)(c.Ql,{value:(null===(a=e.id)||void 0===a?void 0:a.toString())||"",children:e.name},e.id)})})]})]}),(0,n.jsxs)("form",{onSubmit:S,className:"space-y-6",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-2",children:[(0,n.jsx)(s._,{htmlFor:"influencerId",children:"Influencer"}),(0,n.jsxs)(c.Ph,{name:"influencerId",onValueChange:e=>I({target:{name:"influencerId",value:e}}),children:[(0,n.jsx)(c.i4,{id:"influencerId",children:(0,n.jsx)(c.ki,{placeholder:"Select an influencer"})}),(0,n.jsx)(c.Bw,{children:f.map(e=>(0,n.jsx)(c.Ql,{value:e.id.toString(),children:e.channelName},e.id))})]})]}),(0,n.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.05},className:"space-y-2",children:[(0,n.jsx)(s._,{htmlFor:"contractedBy",children:"Contracted By"}),(0,n.jsxs)(c.Ph,{name:"contractedBy",onValueChange:e=>I({target:{name:"contractedBy",value:e}}),children:[(0,n.jsx)(c.i4,{id:"contractedBy",children:(0,n.jsx)(c.ki,{placeholder:"Select contracted by"})}),(0,n.jsxs)(c.Bw,{children:[(0,n.jsx)(c.Ql,{value:"DIRECT",children:"Direct"}),(0,n.jsx)(c.Ql,{value:"AGENCY",children:"Agency"})]})]})]}),"AGENCY"===N.contractedBy&&(0,n.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"space-y-2",children:[(0,n.jsx)(s._,{htmlFor:"agencyId",children:"Agency"}),(0,n.jsxs)(c.Ph,{name:"agencyId",onValueChange:e=>I({target:{name:"agencyId",value:e}}),children:[(0,n.jsx)(c.i4,{id:"agencyId",children:(0,n.jsx)(c.ki,{placeholder:"Select an agency"})}),(0,n.jsx)(c.Bw,{children:g.map(e=>(0,n.jsx)(c.Ql,{value:e.id.toString(),children:e.name},e.id))})]})]}),(0,n.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.15},className:"space-y-2",children:[(0,n.jsx)(s._,{htmlFor:"pricingType",children:"Pricing Type"}),(0,n.jsxs)(c.Ph,{name:"pricingType",onValueChange:e=>I({target:{name:"pricingType",value:e}}),children:[(0,n.jsx)(c.i4,{id:"pricingType",children:(0,n.jsx)(c.ki,{placeholder:"Select pricing type"})}),(0,n.jsxs)(c.Bw,{children:[(0,n.jsx)(c.Ql,{value:"FIXED",children:"Fixed"}),(0,n.jsx)(c.Ql,{value:"CPM",children:"CPM"})]})]})]}),"FIXED"===N.pricingType&&(0,n.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},className:"space-y-2",children:[(0,n.jsx)(s._,{htmlFor:"fixedCost",children:"Fixed Cost (per video)"}),(0,n.jsx)(l.I,{id:"fixedCost",name:"fixedCost",type:"number",value:N.fixedCost||"",onChange:I,required:!0})]}),"CPM"===N.pricingType&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},className:"space-y-2",children:[(0,n.jsx)(s._,{htmlFor:"cpm",children:"CPM"}),(0,n.jsx)(l.I,{id:"cpm",name:"cpm",type:"number",value:N.cpm||"",onChange:I,required:!0})]}),(0,n.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.25},className:"space-y-2",children:[(0,n.jsx)(s._,{htmlFor:"priceCeiling",children:"Price Ceiling"}),(0,n.jsx)(l.I,{id:"priceCeiling",name:"priceCeiling",type:"number",value:N.priceCeiling||"",onChange:I})]})]}),(0,n.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},className:"space-y-2",children:[(0,n.jsx)(s._,{htmlFor:"viewGuarantee",children:"View Guarantee"}),(0,n.jsx)(l.I,{id:"viewGuarantee",name:"viewGuarantee",type:"number",value:N.viewGuarantee||"",onChange:I})]}),(0,n.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.35},className:"space-y-2",children:[(0,n.jsx)(s._,{htmlFor:"viewGuaranteeDays",children:"View Guarantee Days"}),(0,n.jsx)(l.I,{id:"viewGuaranteeDays",name:"viewGuaranteeDays",type:"number",value:N.viewGuaranteeDays||"",onChange:I})]}),(0,n.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.4},className:"space-y-2",children:[(0,n.jsx)(s._,{htmlFor:"status",children:"Status"}),(0,n.jsxs)(c.Ph,{name:"status",onValueChange:e=>I({target:{name:"status",value:e}}),children:[(0,n.jsx)(c.i4,{id:"status",children:(0,n.jsx)(c.ki,{placeholder:"Select status"})}),(0,n.jsxs)(c.Bw,{children:[(0,n.jsx)(c.Ql,{value:"active",children:"Active"}),(0,n.jsx)(c.Ql,{value:"completed",children:"Completed"}),(0,n.jsx)(c.Ql,{value:"cancelled",children:"Cancelled"})]})]})]}),(0,n.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.45},className:"space-y-2 col-span-2",children:[(0,n.jsx)(s._,{children:"Number of Videos and Upload Months"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsx)("div",{className:"space-y-2",children:(0,n.jsx)(l.I,{id:"numberOfVideos",name:"numberOfVideos",type:"number",value:N.numberOfVideos,onChange:e=>{let a=Number(e.target.value);w(e=>({...e,numberOfVideos:a,uploadMonths:Array(a).fill("").map((a,i)=>e.uploadMonths[i]||"")})),k()},required:!0,min:1,placeholder:"Number of Videos"})}),(0,n.jsx)("div",{className:"space-y-2",children:N.uploadMonths.map((e,a)=>(0,n.jsx)(l.I,{type:"month",value:e,onChange:e=>D(a,e.target.value),required:!0,placeholder:"Upload Month ".concat(a+1),className:"mb-2"},a))})]})]}),(0,n.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.5},className:"space-y-2",children:[(0,n.jsx)(s._,{htmlFor:"usage",children:"Usage"}),(0,n.jsxs)(c.Ph,{name:"usage",onValueChange:e=>{w(a=>({...a,usage:e}))},value:N.usage,children:[(0,n.jsx)(c.i4,{id:"usage",children:(0,n.jsx)(c.ki,{placeholder:"Select usage"})}),(0,n.jsx)(c.Bw,{children:m.map(e=>(0,n.jsx)(c.Ql,{value:e,children:e},e))})]})]}),(0,n.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.55},className:"space-y-2",children:[(0,n.jsx)(s._,{htmlFor:"deliverable",children:"Deliverable"}),(0,n.jsxs)(c.Ph,{name:"deliverable",onValueChange:e=>{w(a=>({...a,deliverable:e}))},value:N.deliverable,children:[(0,n.jsx)(c.i4,{id:"deliverable",children:(0,n.jsx)(c.ki,{placeholder:"Select deliverable"})}),(0,n.jsx)(c.Bw,{children:h.map(e=>(0,n.jsx)(c.Ql,{value:e,children:e},e))})]})]})]}),(0,n.jsx)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.6},children:(0,n.jsx)(d.z,{type:"submit",className:"w-full",children:"add"===e?"Add Deal":"Update Deal"})})]})]})]})},e)})]})}}},function(e){e.O(0,[284,944,786,888,774,179],function(){return e(e.s=78605)}),_N_E=e.O()}]);